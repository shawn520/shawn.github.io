---
title: 工厂模式
categories:
- 好好学习
tags:
  - Design Pattern
date: 2018-07-13 20:19:46
---

# 工厂模式

工厂模式属于创建型模式，提供了一种创建对象的最佳方式。

![设计模式](https://raw.githubusercontent.com/shawn520/storage/master/pictures/learn/designPattern/factoryPattern.PNG)

<!-- more -->

在工厂模式中，我们在创建对象时，不会对客户端暴露创建逻辑，并且是通过使用一个共同的接口来指向新创建的对象。


## 介绍

意图：定义一个创建对象的接口，让子类决定实例化哪一个工厂类。

主要解决：接口选择问题

如何解决：子类实现工厂接口，返回抽象产品

使用场景：设计一个连接服务器的框架，需要三个协议，"POP3"、"IMAP"、"HTTP"，可以把这三个作为产品类，共同实现一个接口。 

## 实现

我们将创建一个 *Shape* 接口和实现 *Shape* 接口的实体类。下一步是定义工厂类 *ShapeFactory*。*FactoryPatternDemo*，我们的演示类使用 *ShapeFactory* 来获取 *Shape* 对象。它将向 *ShapeFactory* 传递信息（*CIRCLE / RECTANGLE / SQUARE*），以便获取它所需对象的类型。

![](http://www.runoob.com/wp-content/uploads/2014/08/factory_pattern_uml_diagram.jpg)

1. 创建一个接口

   ```java
   
   public interface Shape {
      void draw();
   }
   
   ```

2. 创建实现接口的实体类

   ```java
   
   public class Rectangle implements Shape {
    
      @Override
      public void draw() {
         System.out.println("Inside Rectangle::draw() method.");
      }
   }
   
   ```

   ```java
   
   public class Square implements Shape {
    
      @Override
      public void draw() {
         System.out.println("Inside Square::draw() method.");
      }
   }
   
   ```

   ```java
   
   public class Circle implements Shape {
    
      @Override
      public void draw() {
         System.out.println("Inside Circle::draw() method.");
      }
   }
   
   ```

3. 创建一个工厂，生成基于给定信息的实体类的对象。

   ```java
   
   public class ShapeFactory {
       
      //使用 getShape 方法获取形状类型的对象
      public Shape getShape(String shapeType){
         if(shapeType == null){
            return null;
         }        
         if(shapeType.equalsIgnoreCase("CIRCLE")){
            return new Circle();
         } else if(shapeType.equalsIgnoreCase("RECTANGLE")){
            return new Rectangle();
         } else if(shapeType.equalsIgnoreCase("SQUARE")){
            return new Square();
         }
         return null;
      }
   }
   
   ```

4. 使用该工厂，通过传递类型信息来获取实体类的对象。

   ```java
   
   public class FactoryPatternDemo {
    
      public static void main(String[] args) {
         ShapeFactory shapeFactory = new ShapeFactory();
    
         //获取 Circle 的对象，并调用它的 draw 方法
         Shape shape1 = shapeFactory.getShape("CIRCLE");
    
         //调用 Circle 的 draw 方法
         shape1.draw();
    
         //获取 Rectangle 的对象，并调用它的 draw 方法
         Shape shape2 = shapeFactory.getShape("RECTANGLE");
    
         //调用 Rectangle 的 draw 方法
         shape2.draw();
    
         //获取 Square 的对象，并调用它的 draw 方法
         Shape shape3 = shapeFactory.getShape("SQUARE");
    
         //调用 Square 的 draw 方法
         shape3.draw();
      }
   }
   
   ```

5. 执行程序，输出结果。

   ```java
   Inside Circle::draw() method.
   Inside Rectangle::draw() method.
   Inside Square::draw() method.
   ```

## 参考资料

https://www.runoob.com/design-pattern/design-pattern-tutorial.html

