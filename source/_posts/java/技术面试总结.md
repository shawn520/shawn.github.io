---
title: 技术面试总结
categories:
- 好好学习
tags:
  - Java
mathjax: false
date: 2019-08-04 11:19:46
---



<!-- more -->

# JVM

说一下 jvm 运行时数据区？

![](https://img-blog.csdn.net/20180224095734717?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZmFueGluZzE5NjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)



按照线程共享和线程私有可以分为两类

线程私有：程序计数器，虚拟机栈，本地方法栈。

线程共享：堆，方法区

1**. 线程共享**

程序计数器 ：当前线程执行字节码的行号指示器

虚拟机栈

在执行方法的同时，会创建一个栈帧（Stack Frame）, 用于存储局部变量表，操作数栈，动态链接，方法出口等信息。

局部变量表存放了基本数据类型 boolean, byte, char, short, int, long, float, double, 对象引用（reference类型）。

本地方法栈

本地方法栈和虚拟机栈类似。

不同点是虚拟机栈为虚拟机执行java方法服务，二本地方法栈为虚拟机使用到的native方法服务。

2. 线程共享

堆（heap）

java堆是用来存放对象实例的，所有线程共享。堆是垃圾回收管理的主要区域。

Java堆根据对象的不同可以分为新生代和老年代。

方法区

方法区用来存储已被虚拟机加载了的类信息、常量、静态变量即时编译器变异后的代码等数据。

运行时常量池是方法区的一部分。用于存放编译期生成的各种字面量和符号引用。

### 说一下堆栈的区别？

堆主要存放对象实例，线程共享。堆是垃圾回收的主要阵地。

栈主要用于存放局部变量，基本数据类型数据，线程私有。栈随线程而生，随线程而灭。

### 队列和栈是什么？有什么区别？

是数据结构，是操作受限的线性表结构。

队列：先进先出，只能在对头出队，队尾入队。

栈：后进先出，只能在栈顶进行入栈和出栈操作。

### 说一下类加载的执行过程？

java是动态解释型语言，类只有加载到JVM中才会执行。

类加载就是将编译后的class文件从硬盘加载到内存中。

类加载是通过类加载器来实现的，类加载器本身也是一个类。

java根据类的不同主要将类分为三类：系统类、扩展类、应用类，以及自定义类。

根据不同的类由分为不同的类加载器：系统类加载器、平台类加载器、应用类加载器。

java类加载是通过**溯源双亲委派机制**实现的，首先由子类向父类请求加载，若父类没有则搜索子类的加载路径中是否包含。

### 怎么判断对象是否可以被回收？

通过可达性分析。从根节点（GC Roots）到该对象之间是否有一条引用链指向。

如果没有，则表示该对象可以被回收。

那些可以作为GC Roots的对象：

- 虚拟机栈中引用的对象
- 方法区中类静态变量引用的对象
- 方法去中常量引用的对象
- Native方法引用的对象

### java 中都有哪些引用类型？

强引用、软引用、弱引用、虚引用。

### 说一下 jvm 有哪些垃圾回收算法？

标记清除算法

复制算法

标记整理算法

分代收集

### 详细介绍一下 CMS 垃圾回收器？

### 新生代垃圾回收器和老生代垃圾回收器都有哪些？有什么区别？



### 简述分代垃圾回收器是怎么工作的？

根据对象存活时间，将堆分为新生代和老年代。

由于新生代生命周期较短，可以采用复制算法进行垃圾回收。

老年代采用标记整理算法进行回收。

### 说一下 jvm 调优的工具？

jps主要用来输出JVM中运行的进程状态信息

jstat 它可以显示出虚拟机进程中的类装载、内存、垃圾收集、JIT编译等运行数据

jstack主要用来查看某个Java进程内的线程堆栈信息，

### 常用的 jvm 调优的参数都有哪些？

**（1）-Xms20M**

表示设置JVM启动内存的最小值为20M，必须以M为单位

**（2）-Xmx20M**

表示设置JVM启动内存的最大值为20M，必须以M为单位。将-Xmx和-Xms设置为一样可以避免JVM内存自动扩展。大的项目-Xmx和-Xms一般都要设置到10G、20G甚至还要高

**（3）-verbose:gc**

表示输出虚拟机中GC的详细情况

**（4）-Xss128k**

表示可以设置虚拟机栈的大小为128k

**（5）-Xoss128k**

表示设置本地方法栈的大小为128k。不过HotSpot并不区分虚拟机栈和本地方法栈，因此对于HotSpot来说这个参数是无效的

**（6）-XX:PermSize=10M**

表示JVM初始分配的永久代（方法区）的容量，必须以M为单位

**（7）-XX:MaxPermSize=10M**

表示JVM允许分配的永久代（方法区）的最大容量，必须以M为单位，大部分情况下这个参数默认为64M

**（8）-Xnoclassgc**

表示关闭JVM对类的垃圾回收

**（9）-XX:+TraceClassLoading**

表示查看类的加载信息

**（10）-XX:+TraceClassUnLoading**

表示查看类的卸载信息

**（11）-XX:NewRatio=4**

表示设置 年轻代（包括Eden和两个Survivor区）/老年代 的大小比值为1：4，这意味着年轻代占整个堆的1/5

## 参考资料

